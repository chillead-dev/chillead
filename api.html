<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>letterbox api · chillead</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="wrap">

<header class="header">
  <h1># letterbox api</h1>
  <div class="muted small">
    status: <span id="apiStatus">checking…</span>
  </div>
</header>

<section class="card">
<pre>
what is this?
-------------
Letterbox API allows you to add
anonymous messages (guestbook / feedback)
to your own website.

users can write messages,
you moderate them,
approved messages are public.

base url:
  https://hatesocial.lol
</pre>
</section>

<section class="section">
  <h2># quick start (for websites)</h2>

  <div class="card subtle">
<pre>
1) send message (no auth required)

POST /api/letters/submit
Content-Type: application/json

{
  "message": "hello from my site!"
}

2) show approved messages

GET /api/letters/list
</pre>
  </div>
</section>

<section class="section">
  <h2># public endpoints (no token)</h2>

  <div class="card subtle">
<pre>
POST /api/letters/submit
-----------------------
description:
  send anonymous message

body:
  {
    "message": "text"
  }

rules:
  - max 500 characters
  - html is sanitized
  - message goes to moderation
</pre>
  </div>

  <div class="card subtle">
<pre>
GET /api/letters/list
--------------------
description:
  get approved messages

response:
  {
    "ok": true,
    "items": [
      {
        "message": "hi!",
        "createdAt": 1736382948123
      }
    ]
  }
</pre>
  </div>
</section>

<section class="section">
  <h2># admin endpoints (token required)</h2>

  <div class="card subtle">
<pre>
IMPORTANT:
----------
Admin token gives FULL control.

DO NOT expose it on client-side.
Use it only on server, bot or private tools.

Authorization header:
  Authorization: Bearer ADMIN_TOKEN
</pre>
  </div>

  <div class="card subtle">
<pre>
GET /api/letters/pending
-----------------------
description:
  messages waiting for moderation
</pre>
  </div>

  <div class="card subtle">
<pre>
POST /api/letters/approve
------------------------
body:
  { "id": "message_id" }

description:
  approve message
  (becomes public)
</pre>
  </div>
</section>

<section class="section">
  <h2># usage example (frontend)</h2>

  <div class="card subtle">
<pre>
fetch("/api/letters/submit", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    message: "hello!"
  })
})
.then(r => r.json())
.then(console.log)
</pre>
  </div>
</section>

<section class="section">
  <h2># api health</h2>

  <div class="card subtle small">
    letterbox: <span id="lbStatus">checking…</span><br>
    now-playing: <span id="npStatus">checking…</span>
  </div>
</section>

<footer class="footer">
  <a href="/">← back to site</a>
</footer>

</main>

<script src="api-docs.js"></script>
</body>
</html>
