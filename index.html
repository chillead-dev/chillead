<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>alex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="container">

<pre class="md">

# welcome!

hello! my name is <b>alex</b>.
i mostly do programming-related things and build
projects that simplify life and save time.

## about

- name: alex
- alive for: <span id="alive"></span>
- languages: EN, RU
- location: Ekaterinburg, RU (<span id="time"></span>)
- occupation:
  creating game cheats, websites,
  telegram bots, parsers / checkers

## background

started programming in 2021 at the age of 11.
first programming language was <b>c++</b>.

## skills (and not only)

- programming
- c++, javascript, typescript
- backend & websites
- telegram bots
- cats üêà

## currently playing

below lies the track that i'm currently listening to on spotify.
or simply nothing, if i'm not listening to anything atm :p

</pre>

<div class="spotify-card" id="player">
  loading track data...
</div>

<p class="note">
this data is approximate and may be delayed by a few seconds.
</p>

</main>

<script>
/* ===== alive counter ===== */
const birth = new Date("2010-08-05T00:00:00Z");
function updateAlive() {
  let diff = Math.floor((Date.now() - birth) / 1000);
  const y = Math.floor(diff / 31557600);
  diff -= y * 31557600;
  const d = Math.floor(diff / 86400);
  diff -= d * 86400;
  const h = Math.floor(diff / 3600);
  diff -= h * 3600;
  const m = Math.floor(diff / 60);
  const s = diff % 60;
  document.getElementById("alive").textContent =
    `${d + y * 365}d, ${h}h, ${m}m, ${s}s (${y}y)`;
}
updateAlive();
setInterval(updateAlive, 1000);

/* ===== local time ===== */
function updateTime() {
  document.getElementById("time").textContent =
    new Intl.DateTimeFormat("en-GB", {
      timeZone: "Asia/Yekaterinburg",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    }).format(new Date());
}
updateTime();
setInterval(updateTime, 1000);

/* ===== spotify now playing ===== */
const box = document.getElementById("player");

async function loadNowPlaying() {
  try {
    const res = await fetch("/api/now-playing", { cache: "no-store" });
    const data = await res.json();

    if (!data || !data.playing) {
      box.textContent = "nothing is currently playing.";
      return;
    }

    const percent = Math.min(
      100,
      Math.max(2, (data.progress / data.duration) * 100)
    );

    box.innerHTML = `
<div class="spotify-head">
  <span class="spotify-icon">ÔÜº</span>
  <span class="spotify-text">listening on spotify</span>
</div>

<div class="track-title">${data.title}</div>
<div class="track-artist">${data.artist}</div>

<div class="progress">
  <div class="progress-fill" style="width:${percent}%"></div>
</div>
`;
  } catch {
    box.textContent = "failed to load track data.";
  }
}

loadNowPlaying();
setInterval(loadNowPlaying, 15000);
</script>

</body>
</html>
